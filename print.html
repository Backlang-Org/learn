<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Learn BackLang</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <link rel="stylesheet" href="/mdbook-quiz/embed.css">
        <script type="text/javascript" src="/mdbook-quiz/embed.js"></script>

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./theme/catppuccin.css">
        <link rel="stylesheet" href="./theme/catppuccin-highlight.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="intro/compiler.html"><strong aria-hidden="true">1.1.</strong> The Compiler</a></li></ol></li><li class="chapter-item expanded "><a href="preparation.html"><strong aria-hidden="true">2.</strong> Preparation</a></li><li class="chapter-item expanded "><a href="the-basics.html"><strong aria-hidden="true">3.</strong> The Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="the-basics/variables.html"><strong aria-hidden="true">3.1.</strong> Variables</a></li><li class="chapter-item expanded "><a href="the-basics/functions.html"><strong aria-hidden="true">3.2.</strong> Functions</a></li><li class="chapter-item expanded "><a href="the-basics/control_flow_conditional.html"><strong aria-hidden="true">3.3.</strong> Conditional Flow</a></li><li class="chapter-item expanded "><a href="the-basics/control_flow_loops.html"><strong aria-hidden="true">3.4.</strong> Loops</a></li><li class="chapter-item expanded "><a href="the-basics/arrays.html"><strong aria-hidden="true">3.5.</strong> Arrays</a></li><li class="chapter-item expanded "><a href="the-basics/data.html"><strong aria-hidden="true">3.6.</strong> Working with data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="the-basics/data/enums.html"><strong aria-hidden="true">3.6.1.</strong> Enumerations</a></li><li class="chapter-item expanded "><a href="the-basics/data/structs.html"><strong aria-hidden="true">3.6.2.</strong> Structs</a></li><li class="chapter-item expanded "><a href="the-basics/data/tuples.html"><strong aria-hidden="true">3.6.3.</strong> Tuples</a></li><li class="chapter-item expanded "><a href="the-basics/data/ranges.html"><strong aria-hidden="true">3.6.4.</strong> Ranges</a></li><li class="chapter-item expanded "><a href="the-basics/data/unit-types.html"><strong aria-hidden="true">3.6.5.</strong> Unit of Measure Types</a></li><li class="chapter-item expanded "><a href="the-basics/data/casting.html"><strong aria-hidden="true">3.6.6.</strong> Casting</a></li><li class="chapter-item expanded "><a href="the-basics/data/exercises.html"><strong aria-hidden="true">3.6.7.</strong> Exercises</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="primitive-datatypes.html"><strong aria-hidden="true">4.</strong> Primitive Datatypes</a></li><li class="chapter-item expanded "><a href="extended.html"><strong aria-hidden="true">5.</strong> Extended</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="extended/conditional.html"><strong aria-hidden="true">5.1.</strong> Conditional</a></li><li class="chapter-item expanded "><a href="extended/unions.html"><strong aria-hidden="true">5.2.</strong> Unions</a></li><li class="chapter-item expanded "><a href="extended/operator-overloading.html"><strong aria-hidden="true">5.3.</strong> Operator Overloading</a></li><li class="chapter-item expanded "><a href="extended/oop.html"><strong aria-hidden="true">5.4.</strong> OOP</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="extended/oop/classes.html"><strong aria-hidden="true">5.4.1.</strong> Classes</a></li><li class="chapter-item expanded "><a href="extended/oop/interfaces.html"><strong aria-hidden="true">5.4.2.</strong> Interfaces</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="macros.html"><strong aria-hidden="true">6.</strong> Macros</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="macros/predefined.html"><strong aria-hidden="true">6.1.</strong> Predefined Macros</a></li><li class="chapter-item expanded "><a href="macros/the_tree.html"><strong aria-hidden="true">6.2.</strong> The Syntax Tree</a></li><li class="chapter-item expanded "><a href="macros/custom.html"><strong aria-hidden="true">6.3.</strong> Writing custom macros</a></li><li class="chapter-item expanded "><a href="macros/dsl/intro.html"><strong aria-hidden="true">6.4.</strong> Writing a DSL</a></li></ol></li><li class="chapter-item expanded "><a href="accessibility.html"><strong aria-hidden="true">7.</strong> Accessibility</a></li><li class="chapter-item expanded "><a href="intrinsics.html"><strong aria-hidden="true">8.</strong> Intrinsics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="intrinsics/dotnet.html"><strong aria-hidden="true">8.1.</strong> Dotnet Intrinsics</a></li></ol></li><li class="chapter-item expanded "><a href="plugins.html"><strong aria-hidden="true">9.</strong> Plugins</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="plugins/custom_plugins.html"><strong aria-hidden="true">9.1.</strong> Custom Plugins</a></li><li class="chapter-item expanded "><a href="plugins/intrinsics.html"><strong aria-hidden="true">9.2.</strong> Intrinsics</a></li><li class="chapter-item expanded "><a href="plugins/bs2k.html"><strong aria-hidden="true">9.3.</strong> Bs2k Sample Plugin</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">FrappÃ©</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Learn BackLang</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Backlang-Org/Backlang" title="Git repository" aria-label="Git repository" target="_blank" rel="noopener noreferrer nofollow">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Backlang's main focus is on reducing code duplication and code by context. The macro system allows us to run functionality before compilation or to generate source code on the fly.
With macros you can create your own language constructs to hide the complexity of a problem.</p>
<h2 id="why-a-new-language"><a class="header" href="#why-a-new-language">Why a new language?</a></h2>
<p>C# is a really good language but has a lack of code reduction. 
F# has really nice features but is less intuitive for C# developers. So I have decided to build a new language to fill the gap between C# and F#, and have added a macro system for code reduction and the ability to make custom language constructs to hide complex problems in a Domain Specific Language. </p>
<p>Users can also write inline intrinsics to use runtime features that are not yet available in the language itself (eg. inline-il).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-compiler"><a class="header" href="#the-compiler">The Compiler</a></h1>
<p>A compiler transforms your source code into an executable that can be runned by your computer. Normally it takes many steps to convert source code to a program.</p>
<p>First, the compiler loads the source code file and group semantic information together like numbers, identifiers and symbols. Then the parser comes in an check if the language grammar is valid and build an abstract syntax tree to represent the source code in memory.</p>
<p>The macro expander takes the tree and run all macros to generate an expanded tree that will be taken to the transformer to build a complete typed intermediate tree. Last, the code generator of the selected target build an executable.</p>
<img src="https://raw.githubusercontent.com/Backlang-Org/learn/main/assets/Backlang-Compiler_Structure.png" />
<div style="break-before: page; page-break-before: always;"></div><h1 id="preparation"><a class="header" href="#preparation">Preparation</a></h1>
<p>Backlang is integrated to the msbuild eco system and can be installed and used easily. To start with Backlang follow this guide.</p>
<h2 id="1-install-dotnet-7-preview"><a class="header" href="#1-install-dotnet-7-preview">1. Install DotNet 7 Preview</a></h2>
<p>Download the installers of the .NET SDK and runtime for your operating system from the <a href="https://dotnet.microsoft.com/en-us/download/dotnet/7.0">.NET Download Page</a></p>
<p>After the installation type <code>dotnet --list-sdks</code> in the terminal to check if the sdk is correctly installed.</p>
<p>To verify if you have installed the right runtime use <code>dotnet --version</code></p>
<h2 id="2-tooling"><a class="header" href="#2-tooling">2. Tooling</a></h2>
<p>To have an easier start install the Backlang-Manager <code>dotnet tool install --global Backlang-Manager</code>. This application can easily install the backlang sdk, templates and the vscode extension for you. To run the manager type <code>backlang</code> in the terminal.</p>
<blockquote>
<p>ðŸ’¡ To Install the sdk using the manager you need admin rights and it only works currently on windows.</p>
</blockquote>
<p>To have the full tooling experience the source file has to have the <code>.back</code> file extension.</p>
<p>Otherwise you can use the following commands:</p>
<pre><code class="language-bash">dotnet new install Backlang.Templates
code --install-extension furesoft.back --force
</code></pre>
<blockquote>
<p>ðŸ’¡ To Use the sdk without the backlang manager, you have to specifiy the version in the project file of the sdk, eg. <code>Backlang.NET.SDK/1.0.60</code></p>
</blockquote>
<h2 id="3-building-and-running"><a class="header" href="#3-building-and-running">3. Building and Running</a></h2>
<p>To build an executable use the <code>dotnet build</code> command in the project folder. If you have selected the .Net target you can run it directly with <code>dotnet TestConsole.dll</code>. To combine those steps together you can simply use <code>dotnet run</code>. </p>
<blockquote>
<p>ðŸ’¡ If you use another target than .NET you have to figure out by yourself how to run it</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>In this section you will learn the absolute basic knowledge needed to write simple applications with Backlang.</p>
<p>To write something out to the console:</p>
<pre><code class="language-back">func main() {
    print(&quot;Hello World&quot;);
}
</code></pre>
<p>A program has to have an entry point method called <code>main</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="variables"><a class="header" href="#variables">Variables</a></h1>
<h2 id="definition"><a class="header" href="#definition">Definition</a></h2>
<p>A variable can hold a value. Variables are by default immutable to prevent from changing the value. If you want to change the value later you can declare the variable as mutable with <code>mut</code>.</p>
<p>The syntatic structure of a variable definition:</p>
<pre><code class="language-ebnf">&lt;name&gt; ::= [a-zA-Z_][a-zA-Z0-9_]+
&lt;expression&gt; ::= &lt;literal&gt; | ...
&lt;variable_declaration&gt; ::= &quot;let&quot; &quot;mut&quot;? &lt;name&gt; (&quot;:&quot; &lt;typename&gt;)? = &lt;expression&gt; &quot;;&quot;
</code></pre>
<p>Sample of a variable definition:</p>
<pre><code class="language-back">let age = 42;
</code></pre>
<p>Backlang can automaticly deduce the type of the variable but if you want to specify the type, here is how:</p>
<pre><code class="language-back">let name: string = &quot;Bob&quot;;
</code></pre>
<p>You can also specify the type by a literal type specifier:</p>
<pre><code class="language-back">let pi = 3.1451d;
</code></pre>
<p>A list of all basic primitive datatypes can be found <a href="the-basics//primitive-datatypes.html">here</a>.</p>
<h2 id="assignments"><a class="header" href="#assignments">Assignments</a></h2>
<p>You can only assign mutable variables. If you try to change an immutable variable the compiler throws an error.</p>
<p>The syntactic structure of assignments:</p>
<pre><code class="language-ebnf">&lt;assignment&gt; ::= &lt;name&gt; &quot;=&quot; &lt;expression&gt; &quot;;&quot;
</code></pre>
<p>A simple example:</p>
<pre><code class="language-back">let mut day = &quot;Monday&quot;;
day = &quot;Tuesday&quot;;
</code></pre>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="variables"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}},{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;The variable is not declared correctly&quot;,&quot;The variable is not declared as mutable&quot;],&quot;prompt&quot;:&quot;Why you can't reaassign the variable if the declaration has no mut keyword?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="functions"><a class="header" href="#functions">Functions</a></h1>
<p>A piece of code can be combined as a function. A function can expect parameters and can return a value. The simplest function is the <code>println</code> function to print a message to the output stream (for example the console).</p>
<p>The syntactic structure of a function:</p>
<pre><code class="language-ebnf">&lt;parameter&gt; ::= &lt;name&gt; &quot;:&quot; &lt;typename&gt; (&quot;=&quot; &lt;expression&gt;)?
&lt;parameter_list&gt; ::= &lt;parameter&gt; || &lt;parameter&gt; &quot;,&quot; &lt;parameter_list&gt;
&lt;function_definition&gt; ::= &lt;modifier&gt;? &quot;func&quot; &lt;name&gt; &quot;(&quot; &lt;parameter_list&gt;* &quot;)&quot; (&quot;-&gt;&quot; &lt;typename&gt;)? &quot;{&quot; &lt;body&gt; &quot;}&quot;
</code></pre>
<p>A quick example:</p>
<pre><code class="language-back">func printHello() {
    println(&quot;Hello!&quot;);
}
</code></pre>
<p>When you want to pass arguments to a function, do it like this:</p>
<pre><code class="language-back">func greet(name: string) {
    println(&quot;Morning, &quot; + name + &quot;!&quot;);
}

greet(&quot;Bob&quot;);
</code></pre>
<p>To give a return type, you put an arrow before the block of code:</p>
<pre><code class="language-back">func getMyLovedNumber() -&gt; i32 {
    return 2;
}

let lovedNumber = getMyLovedNumber(); // this will be 2
</code></pre>
<p>For default values, just define them in the head of the function like so:</p>
<pre><code class="language-back">private static func greet(name: string = &quot;Oh no it's nameless :c&quot;) -&gt; none {
    println(&quot;Morning, &quot; + name + &quot;!&quot;); 
}

greet(); // this will be &quot;Morning, Oh no it's nameless :c!&quot;
</code></pre>
<p>Generic arguments will be defined with the <code>where</code> keyword after the arguments:</p>
<pre><code class="language-back">private static func myCoolFunction&lt;T&gt;(smth: T) where T: GameObject -&gt; T {
    // code...
}
</code></pre>
<p>When you want to skip a default variable of a function, do it this way:</p>
<pre><code class="language-back">func greet(name : string, thisIsUseless: bool = false) {
    println(&quot;Morning, &quot; + name + &quot;!&quot;); 
}

greet(name = &quot;Peter&quot;); // we skip the bool &quot;thisIsUseless&quot; and jump directly to the name argument
</code></pre>
<p>Optional arguments have to be after mandatory arguments.</p>
<h2 id="exercises"><a class="header" href="#exercises">Exercises</a></h2>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="functions"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="conditional-control-flow"><a class="header" href="#conditional-control-flow">Conditional Control Flow</a></h1>
<p>What would a program be without any decisions? Really boring. There are two kinds of conditional statements available in Backlang, <code>if</code> and <code>switch</code>. But what is a condition and conditional control flow? Let's figure it out.</p>
<h2 id="conditions"><a class="header" href="#conditions">Conditions</a></h2>
<p>A condition always evaluates to <code>true</code> or <code>false</code>. Conditions can be combined with relational operators. Here is a list:</p>
<div class="table-wrapper"><table><thead><tr><th>operator</th><th>description</th></tr></thead><tbody>
<tr><td>! not</td><td>The logical not operator inverts the result. <code>true =&gt; false</code> and <code>false =&gt; true</code></td></tr>
<tr><td>&amp;&amp; and</td><td>The logical and combines two conditions. It evaluates to true only if both conditions are true</td></tr>
<tr><td>|| or</td><td>The logical or operator evaluates to true if one of the operands are true</td></tr>
</tbody></table>
</div>
<h2 id="if-statements"><a class="header" href="#if-statements">If-Statements</a></h2>
<p>If-statements allow you to brnch the flow of control. </p>
<p>Here is the syntactic structure of a full if-statement:</p>
<pre><code class="language-ebnf">&lt;if_statement&gt; ::= &quot;if&quot; &lt;condition&gt; &quot;{&quot; &lt;trueBody&gt; &quot;}&quot; (&quot;else&quot; &quot;{&quot; &lt;falseBody&gt; &quot;}&quot;)?
</code></pre>
<p>If only one statement is given for the body the curly braces can be left out.</p>
<p>Here is a simple example:</p>
<pre><code class="language-back">func main() {
    let isHappy = true;

    if isHappy {
        print(&quot;You are happy.&quot;);
    }
    else {
        print(&quot;You are not happy&quot;);
    }
}
</code></pre>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="conditions"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:0},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;Yes&quot;,&quot;No&quot;],&quot;prompt&quot;:&quot;Is `x and !b` valid code?&quot;}},{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;When the variable x is the same type as variable b&quot;,&quot;If the type of those variables is not bool or don't has overloaded operators&quot;],&quot;prompt&quot;:&quot;When is `x and !b` not valid code?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="loops"><a class="header" href="#loops">Loops</a></h1>
<p>Now I will introduce you the concept of loops. A loop can repeat code. There are several kind of loops but we will start with the simplest loop - The <code>while</code> loop.</p>
<h2 id="while-loops"><a class="header" href="#while-loops">While Loops</a></h2>
<p>The while loop is a head-controlled loop. That means that the body will only be executed if the condition is true, otherwise the body will be skipped.</p>
<p>Here is the syntactic structure:</p>
<pre><code class="language-ebnf">&lt;while_loop&gt; ::= &quot;while&quot; &lt;condition&gt; &quot;{&quot; &lt;body&gt; &quot;}&quot;
</code></pre>
<p>Here is a simple example:</p>
<pre><code class="language-back">func main() {
    let mut number = 42;

    while number &gt; 0 { //only execute if number is greater than zero
        print(number); //prints the number

        number = number + 1; //increses number by 1
    }
}
</code></pre>
<h2 id="for-loop"><a class="header" href="#for-loop">For-Loop</a></h2>
<p>A for loop can be used to iterate over arrays/iterators. To repeat code for a given number of iterations you can use ranges. </p>
<p>The definition of a for-loop:</p>
<pre><code class="language-ebnf">&lt;for_loop&gt; ::= &quot;for&quot; &lt;name&gt; &quot;in&quot; &lt;iterable&gt; &quot;{&quot; &lt;body&gt; &quot;}&quot;
</code></pre>
<p>A simple example to repeat code:</p>
<pre><code class="language-back">for x in 1..12 {
    print(&quot;index: &quot; + x);
}
</code></pre>
<p>You can also use ranges to reverse the direction of the loop:</p>
<pre><code class="language-back">for x in 12..1 {
    print(&quot;index: &quot; + x);
}
</code></pre>
<h2 id="exercices"><a class="header" href="#exercices">Exercices</a></h2>
<ol>
<li>Write a program to calculate the factorial of a given number with a while loop.</li>
<li>Would it be possible to solve this problem with a for loop?</li>
</ol>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="loops"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="arrays"><a class="header" href="#arrays">Arrays</a></h1>
<p>An array can hold multiple values of a specific type. The memory must be preallocated.</p>
<p>The structure of a variable of array type:</p>
<pre><code class="language-ebnf">&lt;array_type&gt; ::= &lt;typename&gt; &quot;[&quot; &quot;,&quot;+ &quot;]&quot;
&lt;expression_list&gt; ::= &lt;expression&gt; &quot;,&quot; &lt;expression_list&gt; | &lt;expression&gt;
&lt;array_expression&gt; ::= &quot;[&quot; &lt;expression_list&gt; &quot;]&quot;
</code></pre>
<p>Simple Example:</p>
<pre><code class="language-back">let primes : i32[] = [2, 3, 5, 8, 11, 13];
</code></pre>
<p>A value of the array can be accessed though the index operator in square brackets. Every item has an index to indentify an element. An index starts at zero, so the first element is accessable at index 0, the second element is accessible at index 1 and so on. The index has to be within the bounds of the array. It cannot be negative or greater than or equal to the length of the array.</p>
<pre><code class="language-back">print(primes[1]); //access the 2. element
</code></pre>
<p>An item in the array can be also changed, even if the variable that contains it is not mutable. </p>
<pre><code class="language-back">primes[3] = 7;
</code></pre>
<p>The example above is an array of 1 dimension. You can also define arrays of more dimensions to build a matrix.</p>
<p>To declare a n-dimensional array:</p>
<pre><code class="language-back">let matrix : i32[,] = [[0, 1], [1, 0]];
let element = matrix[0, 0];
</code></pre>
<h2 id="exercises-1"><a class="header" href="#exercises-1">Exercises</a></h2>
<ol>
<li>Declare an array containing the first ten prime numbers and print it to the console.</li>
</ol>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="arrays"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="working-with-data"><a class="header" href="#working-with-data">Working With Data</a></h1>
<p>In this section you will learn how data can be structured and handled as different types.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="enumerations"><a class="header" href="#enumerations">Enumerations</a></h1>
<p>An enumeration can give a specific range of numbers a name.</p>
<p>The structure of an enumeration:</p>
<pre><code class="language-ebnf">&lt;enum_value&gt; ::= &lt;number&gt;
&lt;enum_member&gt; ::= &lt;name&gt; (&quot;=&quot; &lt;enum_value&gt;)?
&lt;enum_declaration&gt; ::= &lt;modifiers&gt; &quot;enum&quot; &lt;name&gt; &quot;{&quot; &lt;enum_member&gt; &quot;}&quot;
</code></pre>
<p>A simple example:</p>
<pre><code class="language-back">public enum ConsoleColor {
    Red = 0,
    Green = 1,
    Blue = 2
}
</code></pre>
<p>If you leave out the value the compiler assigns the value automatically based on the index.</p>
<p>Exercises</p>
<ol>
<li>Declare an enum for representing the sex of a person and write a <code>Person</code> class with the sex field.</li>
<li>What can enums be used for?</li>
<li>Which values can hold an enum?</li>
</ol>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="enums"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="declaring-structs"><a class="header" href="#declaring-structs">Declaring structs</a></h3>
<p>A struct is something like a wrapper for different values. It is a value type and allocated on the stack (in .NET, this can differ for other backends). A struct can only contain values. </p>
<p>The syntactic structure of a struct:</p>
<pre><code class="language-ebnf">&lt;struct_value&gt; ::= &quot;let&quot; &lt;name&gt; &quot;:&quot; &lt;typename&gt; &quot;;&quot;
&lt;struct_declaration&gt; ::= &lt;modifier&gt;? &quot;struct&quot; &lt;name&gt; &quot;{&quot; &lt;struct_value&gt;* &quot;}&quot;
</code></pre>
<p>An automatic constructor will be generated for the struct to initialize all fields.</p>
<p>A simple example:</p>
<pre><code class="language-back">public struct Point {
    let X : i32;
    let Y : i32;
}
</code></pre>
<h3 id="working-with-structs"><a class="header" href="#working-with-structs">Working with structs</a></h3>
<p>To create an instance of a struct you have to call the constructor. </p>
<pre><code class="language-back">let p = Point::new(5, 8);
</code></pre>
<p>The code above creates a new instance of the struct <code>Point</code> and calls the constructor to initialize the field <code>X</code> with 5 and the field <code>Y</code> with 8.</p>
<p>To index an instance of a struct by one of its fields, use the <code>.</code>-operator.</p>
<pre><code class="language-back">print(p.X);
print(p.Y);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="tuples"><a class="header" href="#tuples">Tuples</a></h2>
<p>A tuple is like an anonymous struct. It can hold values but it doesn't have a name. Tuples can be used to map or return multiple values. A tuple can hold up to 8 values. </p>
<p>Here is a simple example:</p>
<pre><code class="language-back">let myTuple : (i32, bool) = (42, true);
</code></pre>
<pre><code class="language-back">func doSomething() -&gt; (i32, string) {
    return (1, &quot;Some Error Occured&quot;);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ranges"><a class="header" href="#ranges">Ranges</a></h2>
<p>A range represents a range of numbers or in some contexts a range of types. A range has a lower and a upper bound.</p>
<pre><code class="language-back">let range = 1..200;
</code></pre>
<p>The sample above uses a range from 1 to 200 inclusive. That means an array will be instantiated with all the values from 1 to 200.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="unit-of-measure-types"><a class="header" href="#unit-of-measure-types">Unit Of Measure Types</a></h2>
<p>A unit of measure type can gives a literal a typed unit. So you can use it to ensure that you are working with the right number unit. </p>
<p>To define a simple unit type:</p>
<pre><code class="language-ebnf">&lt;unit_def&gt; ::= &quot;unit&quot; &lt;name&gt; &quot;;&quot;
</code></pre>
<p>A simple example for a definition and usage of an unit type:</p>
<pre><code class="language-back">unit seconds;

public static func main() {
    let time = 12&lt;seconds&gt;;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="casting"><a class="header" href="#casting">Casting</a></h1>
<h2 id="implicit-casts"><a class="header" href="#implicit-casts">Implicit Casts</a></h2>
<p>Sometimes you want to pass number values of a specific type that is smaller than the required type. Backlang allows you to use those values by an implicit cast. For example: you can use a i32 value if a variable has the type i64. This can be done so long as the two types are of the same kind, e.g. integer and integer; or float and float.</p>
<p>You can also write a custom operator overload to make your custom types implicitly castable.</p>
<h2 id="explicit-casts"><a class="header" href="#explicit-casts">Explicit Casts</a></h2>
<p>You can always try to cast a value to another type with the <code>as</code> operator. If this is not successful it will return <code>none</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="exercises-2"><a class="header" href="#exercises-2">Exercises</a></h2>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="data"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;ShortAnswer&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;name&quot;},&quot;prompt&quot;:{&quot;prompt&quot;:&quot;What is the difference between a struct and a tuple.&quot;}},{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:0},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;Yes&quot;,&quot;No&quot;],&quot;prompt&quot;:&quot;Is it possible to nest tuples?&quot;}},{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:3},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;2&quot;,&quot;4&quot;,&quot;6&quot;,&quot;8&quot;,&quot;16&quot;],&quot;prompt&quot;:&quot;How many values can be contained in a tuple?&quot;}},{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;Yes&quot;,&quot;No&quot;],&quot;prompt&quot;:&quot;Can a `char` be implicitly cast to an `i16`&quot;}},{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;Yes&quot;,&quot;No&quot;],&quot;prompt&quot;:&quot;If you declared a variable with an unit of measure type, could you implicitly cast it to another measure type?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="primitive-datatypes"><a class="header" href="#primitive-datatypes">Primitive DataTypes</a></h1>
<blockquote>
<p>ðŸ’¡ Literals are case insensitive</p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>Example</th><th>DataType</th><th>Description</th><th>Literal</th></tr></thead><tbody>
<tr><td></td><td>obj</td><td>Any Value</td><td></td></tr>
<tr><td>true</td><td>bool</td><td>A boolean value: true or false</td><td></td></tr>
<tr><td>'c'</td><td>char</td><td>A single character</td><td></td></tr>
<tr><td>&quot;hello world&quot;</td><td>string</td><td>A list of characters combined as one string</td><td></td></tr>
<tr><td>255ub</td><td>u8</td><td>unsigned 8-bit (byte) integer</td><td><code>ub</code></td></tr>
<tr><td>1024us</td><td>u16</td><td>unsigned 16-bit (short) integer</td><td><code>us</code></td></tr>
<tr><td>10241024u</td><td>u32</td><td>unsigned 32-bit integer</td><td><code>u</code> or <code>ui</code></td></tr>
<tr><td>10002222ul</td><td>u64</td><td>unsigned 64-bit (long) integer</td><td><code>ul</code></td></tr>
<tr><td>255b</td><td>i8</td><td>signed 8-bit integer</td><td><code>b</code></td></tr>
<tr><td>-1024s</td><td>i16</td><td>signed 16-bit (short) integer</td><td><code>s</code></td></tr>
<tr><td>10241024</td><td>i32</td><td>signed 32-bit integer</td><td></td></tr>
<tr><td>-10002222L</td><td>i64</td><td>signed 64-bit (long) integer</td><td><code>l</code></td></tr>
<tr><td>1.23h</td><td>f16</td><td>A floating point number, half precision</td><td><code>h</code></td></tr>
<tr><td>3.14f</td><td>f32</td><td>A floating point number</td><td><code>f</code></td></tr>
<tr><td>2.77d</td><td>f64</td><td>A floating point number, double precision</td><td><code>d</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="extended"><a class="header" href="#extended">Extended</a></h1>
<p>This section is about more language constructs and how these can save you from writing boilerplate code.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="switch-statements"><a class="header" href="#switch-statements">Switch Statements</a></h2>
<p>Our Switch Statements got a lot of rework from normal switch statements you see in other languages.
Normal features from the switch statement behave as expected</p>
<pre><code class="language-back">switch element {
    case value: { print(&quot;its the value&quot;); break; }
    default: print(&quot;its not the value :c&quot;);
}
</code></pre>
<p>The example is great for one of our new features. Do you see how annoying it is that we had to use curly braces just because we need a break?
For these things, we can just type break before our case like so</p>
<pre><code class="language-back">switch element {
    break case value: print(&quot;its the value&quot;);
    default: print(&quot;its not the value :c&quot;);
}
</code></pre>
<p>But look! What if we want an <code>if</code> clause after the first <code>case</code> so that it only gets executed when the first <code>case</code> failed and couldn't break.
Yeah, <em>normally</em> we would end the <code>switch</code>, then make the <code>if</code> statement and then put the <code>default</code> code in the <code>else</code> branch. But doesn't that sound complicated? Yes, cause it is! In Back, you can just put <code>if</code> statements into a <code>switch</code> statement and also break in them like so</p>
<pre><code class="language-back">switch element {
    break case value: print(&quot;its the value&quot;);
    break if myFunction(element): print(&quot;my function likes it :D&quot;);
    default: print(&quot;its not the value :c&quot;);
}
</code></pre>
<p>Ok, but we got even more to show you. For example, you can check <strong>two values</strong> in one <code>case</code> by just typing</p>
<pre><code class="language-back">switch element {
    break case value: print(&quot;its the value&quot;);
    break if myFunction(element): print(&quot;my function likes it :D&quot;);
    break case value1 || value2: print(&quot;its one of those values&quot;);
    default: print(&quot;its not the value :c&quot;);
}
</code></pre>
<p>But what's when you want to check a method of the element? And the element changes? For example <code>switch (getRandomUUID()) { /*...*/ }</code>
Of course we have a solution for that! The <code>when</code> keyword</p>
<pre><code class="language-back">switch element {
    break case value: print(&quot;its the value&quot;);
    break if myFunction(element): print(&quot;my function likes it :D&quot;);
    break case value1 || value2: print(&quot;its one of those values&quot;);
    when &gt;= 17: {
        print(&quot;element is greater or equal to 17.&quot;);
        break;
    }
    break when isCool(): print(&quot;converts to if element.isCool()&quot;);
    default: print(&quot;its not the value :c&quot;);
}
</code></pre>
<h2 id="exercices-1"><a class="header" href="#exercices-1">Exercices</a></h2>
<ol>
<li>Why you would use an switch-statement instead of an if-statement?</li>
</ol>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="switch"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h2 id="unions"><a class="header" href="#unions">Unions</a></h2>
<p>An union can be used to hold a value with different types. Unions can be used to avoid casting.</p>
<p>The syntactic structure of an union:</p>
<pre><code class="language-ebnf">&lt;memory_offset&gt; ::= &lt;int_number&gt;
&lt;union_value&gt; ::= &quot;let&quot; &lt;name&gt; &quot;=&quot; &lt;memory_offset&gt; &quot;;&quot;
&lt;union_declaration&gt; ::= &lt;modifier&gt;? &quot;union&quot; &lt;name&gt; &quot;{&quot; &lt;union_value&gt;* &quot;}&quot;
</code></pre>
<p>A color union is a good example:</p>
<pre><code class="language-back">
public union Color {
    let mut R: u8 = 0;
    let mut G: u8 = 1;
    let mut B: u8 = 2;
    let mut A: u8 = 3;

    let value: u32 = 0;
}

</code></pre>
<p>The <code>value</code> field can be used to convert all color values (RGBA) to a u32 integer without casting. An union allocates memory for the most sized variable type. In this example the whole union will allocate 4 bytes because the biggest type used in the union is u32.</p>
<h2 id="discriminated-unions"><a class="header" href="#discriminated-unions">Discriminated Unions</a></h2>
<p>A discrimated union (DU) is a typed union. It can be used to create a hierarchical type structure easily. And Du's are generating a default constructor and a <code>ToString</code> method. You will see that discrimated unions are saving a lot of lines of code.</p>
<p>The structure of DU's:</p>
<pre><code class="language-ebnf">&lt;du_prop&gt; ::= &quot;mutable&quot;? &lt;name&gt; &quot;:&quot; &lt;type&gt;
&lt;du_prop_list&gt; ::= &lt;du_prop&gt; &quot;,&quot; &lt;du_prop_list&gt; | &lt;du_prop&gt;
&lt;du_type_def&gt; ::= &quot;|&quot; &lt;name&gt; &quot;(&quot; &lt;du_prop_list&gt; &quot;)&quot;
&lt;du_definition&gt; ::= &quot;type&quot; &lt;name&gt; &quot;=&quot; &lt;du_type_def&gt;* &quot;;&quot;
</code></pre>
<p>For example we will create a simple DU for an abstract syntax tree:</p>
<pre><code class="language-back">public type Expression = | Literal(Value : obj)
                  | Group(Inner : Expression)
                  | Binary(Lhs : Expression, Operator : string, Rhs : Expression);
</code></pre>
<p>The normal equivalent class structure would be:</p>
<pre><code class="language-back">public abstract class Expression {

}

public class Literal {
    let Value : obj;
}

implement Literal {
    public constructor(value : obj) {
       Value = value;
    }
}

public class Group {
    let Inner: Expression;
}

implement Group {
    public constructor(inner : Expression) {
       Inner = inner;
    }
}

public class Binary {
    let Lhs: Expression;
    let Rhs: Expression;
}

implement Binary {
    public constructor(lhs : Expression) {
       Lhs = lhs;
       Rhs = rhs;
    }
}
</code></pre>
<h2 id="exercices-2"><a class="header" href="#exercices-2">Exercices</a></h2>
<ol>
<li>What is the difference between a union and a discriminated union?</li>
<li>What is the profit of using unions?</li>
<li>What could be an usage screnario of using a discriminated union?</li>
</ol>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="unions"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="operator-overloading"><a class="header" href="#operator-overloading">Operator Overloading</a></h1>
<p>Operator Overloading gives you the ability to write prettier code. Instead of writing functions you write operators.</p>
<blockquote>
<p>ðŸ’¡ Overloaded operators should not have side-effects.</p>
</blockquote>
<h2 id="overloadable-operators"><a class="header" href="#overloadable-operators">Overloadable Operators</a></h2>
<h3 id="unary"><a class="header" href="#unary">Unary</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Kind</th><th>Operators</th><th>Names</th></tr></thead><tbody>
<tr><td>Arithmetic</td><td>- %</td><td>neg percentage</td></tr>
<tr><td>Bitwise</td><td>~</td><td>bitwise_not</td></tr>
<tr><td>Logical</td><td>!</td><td>logical_not</td></tr>
<tr><td>Memory</td><td>* &amp;</td><td>deref addrof</td></tr>
</tbody></table>
</div>
<h3 id="binary"><a class="header" href="#binary">Binary</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Kind</th><th>Operators</th><th>Names</th></tr></thead><tbody>
<tr><td>Arithmetic</td><td>+ - * / %</td><td>add sub mul div mod</td></tr>
<tr><td>Bitwise</td><td>^ &amp; |</td><td>exclusive_or bitwise_and bitwise_or</td></tr>
</tbody></table>
</div>
<p>You can also overload the <code>implicit</code> operator to make your type implicit castable. The argument is the value to cast from and the return value is the result.</p>
<p>Overloaded operators are functions with the <code>operator</code> modifier and the name has to be one of the list above.</p>
<p>Here is a simple example of a <code>Point</code> struct.</p>
<pre><code class="language-back">public struct Point {
    let X : i32;
    let Y : i32;
}

implement Point {
    operator func add(lhs : Point, rhs : Point) -&gt; Point {
        return Point::new(lhs.X + rhs.X, lhs.Y + rhs.Y);
    }

    operator func neg(p : Point) -&gt; Point {
        return Point::new(-p.X, -p.Y);
    }
}
</code></pre>
<pre><code class="language-back">func main() {
    let p = Point::new(42, 5);
    let negP = -(p + p);

    print(p);
    print(negP);
}
</code></pre>
<h2 id="exercices-3"><a class="header" href="#exercices-3">Exercices</a></h2>
<ol>
<li>Write a structure called <code>Vector2</code> and implement all neccessary operator that can be applied to a Vector</li>
<li>Which operators cannot be overloaded?</li>
<li>Why you don't want to overload the memory operators on a <code>Vector2</code> struct?</li>
<li>What should operators definitly not do and why?</li>
</ol>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="operator-overloading"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="object-orientated-programming"><a class="header" href="#object-orientated-programming">Object Orientated Programming</a></h1>
<p>Object Orientated Programming is a paradigm to form code like the world is. A class is a template that can be reused to create objects. An object is a specific instance of a class, for example a Dog class and a myDog object.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="classes"><a class="header" href="#classes">Classes</a></h1>
<p>A class is like a template for objects and classes can inherit from each other to represent a hierarchical structure. Classes can also have an implement block to append functions. These functions are called <code>member functions</code>. If a function is not in an implement block it is called <code>free function</code>. All Properties/Fields/Methods are inherited from the base class. An <code>abstract</code> function has to be implemented by the inherentor but a <code>virtual</code> function can be overriden by the inherentor. To use a class it has to be fully implemented, that means that all abstract members have to be defined.</p>
<blockquote>
<p>ðŸ’¡ You can only inherit from one base class but you can implement as many interfaces as you want. See <a href="extended/oop//extended/oop/interfaces.html">Interfaces</a>.</p>
</blockquote>
<p>The syntax of a class:</p>
<pre><code class="language-ebnf">&lt;inheritances&gt; ::= &lt;name&gt; &quot;,&quot; &lt;inheritances&gt; | &lt;name&gt;
&lt;field&gt; ::= &lt;modifiers&gt; &lt;variable_declaration&gt;

&lt;function_body&gt; ::= &quot;{&quot; &lt;statements&gt; &quot;}&quot;

&lt;get_block&gt; ::= &quot;get&quot; (&lt;function_body&gt; | &quot;;&quot;)
&lt;set_block&gt; ::= &quot;set&quot; (&lt;function_body&gt;) | &quot;;&quot;)
&lt;get_and_set_block&gt; ::= &lt;get_block&gt; &lt;set_block&gt;

&lt;property&gt; ::= &lt;modifiers&gt; &quot;prop&quot; &lt;name&gt; &quot;{&quot; &lt;get_block&gt; | &lt;get_and_set_block&gt; &quot;}&quot;

&lt;class_members&gt; ::= &lt;field&gt; | &lt;property&gt;
&lt;class_declaration&gt; ::= &lt;modifiers&gt; &quot;class&quot; &lt;name&gt; (&quot;:&quot; &lt;inheritances&gt;) &quot;{&quot; &lt;class_members&gt; &quot;}&quot;
</code></pre>
<p>A class instance can be created like a struct with the static <code>new</code> function. Here is a little sample of a class hierarchie:</p>
<pre><code class="language-back">public abstract class Animal {

}

public class Mammal : Animal {

}

public class Bird : Animal {

}

public class Dog : Mammal {

}

public class Kiwi : Bird {

}

public static func main() {
    let animal = Dog::new();

    if animal is Dog {
        print(&quot;Wuff&quot;);
    }
    else {
        print(&quot;I don't know how the animal communicate&quot;);
    }
}
</code></pre>
<p>As from the example above you can see that we create an immutable instance of <code>Dog</code> and set it to the variable <code>animal</code>. We can check if an instance is of a specific type with the <code>is</code> operator which returns a boolean.
So, if the instance created is of type <code>Dog</code> we print a specific message to the console otherwise we print an error message.</p>
<h2 id="the-implement-construct"><a class="header" href="#the-implement-construct">The implement construct</a></h2>
<p>The <code>implement</code> block seperates data from functionality. So if you want to add functions to a type you can use the implement block. This language feature can also be used to extend existing types from other assemblys. This are called <code>extension functions</code>.</p>
<p>The structure of an implement block:</p>
<pre><code class="language-ebnf">&lt;typeOrTypeRange&gt; ::= &lt;typename&gt; | &lt;typename&gt; &quot;..&quot; &lt;typeOrTypeRange&gt; | &lt;typename&gt; &quot;,&quot; &lt;typeOrTypeTange&gt;
&lt;implement&gt; ::= &quot;implement&quot; &lt;typeOrTypeRange&gt; &lt;functionBlock&gt;
</code></pre>
<p>The implement block can also be used to save code. If you use a typerange instead a typename all functions will be expanded to all types of the range. To use the expanded type in the function you can use the <code>SELF</code> type.</p>
<p>An example of an expandable implement block:</p>
<pre><code class="language-back">implement u8..u64, string {
    public static function printValue(src: SELF) {
        print(src);
    }
}
</code></pre>
<h2 id="exercices-4"><a class="header" href="#exercices-4">Exercices</a></h2>
<ol>
<li>What is the difference between a class and a struct?</li>
<li>Create a class hierarchie for any car brand you know. With the property <code>color</code> and one virtual function <code>GetDescription</code>.</li>
<li>Create some instances of your classes and call the <code>GetDescription</code> member function. Does this print what you expect?</li>
<li>Rewrite the class hierarchie from the sample above with <a href="extended/oop//extended/unions.html">Discrimated Unions</a></li>
</ol>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="classes"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="interfaces"><a class="header" href="#interfaces">Interfaces</a></h1>
<p>An interface describes a contract between different objects. If a class implements an interface the instanciator knows that all members are implemented. You can also inherit from other interfaces to combine many interfaces into one name. Interface names should start with an <code>I</code>.</p>
<p>The syntax of an interface:</p>
<pre><code class="language-ebnf">&lt;interface_list&gt; ::= &lt;name&gt; &quot;,&quot; &lt;interface_list&gt; | &lt;name&gt;
&lt;interface_declaration&gt; ::= &lt;modifiers&gt; &quot;interface&quot; &lt;name&gt; (&quot;:&quot; &lt;interface_list&gt;)? &quot;{&quot; &lt;declarations&gt; &quot;}&quot;
</code></pre>
<p>Here a little example:</p>
<pre><code class="language-back">public interface IComparable {
    bool Compare(left : obj, right : obj);
}

public class MyCustomObject : IComparable {
    
}

implement MyCustomObject {
    public bool Compare(left : obj, right : obj) {
        retur left == right;
    }
}
</code></pre>
<h2 id="exercices-5"><a class="header" href="#exercices-5">Exercices</a></h2>
<ol>
<li>Can you implement more than one interfaces?</li>
<li>What happens if you implement the same interface twice?</li>
<li>Can you make an instance of an interface?</li>
</ol>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="interfaces"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div><script type="text/javascript" src="mdbook-quiz/embed.js"></script>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h1 id="macros"><a class="header" href="#macros">Macros</a></h1>
<p>A macro is a function which is called at compile time and replaces the macro-call with a new sub-tree.
Macros can match different properties of the tree. A macro call can look like integrated language constructs to hide complextity from the caller.</p>
<p>Here are some examples of how macros can be called:</p>
<pre><code class="language-back">quote(hello);

quote {
    hello;
}

quote(simplyfy) {
    hello;
}

quote;
</code></pre>
<p>If a macro is called with a block the block will be treated as the last argument. If no arguments are specified the parentheses can be left out.</p>
<p>Macros can be used to generate object graphs from resources such as files, to generate boilerplate code for design patterns, or as a simple domain specific language.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="all-predefined-macros"><a class="header" href="#all-predefined-macros">All predefined Macros</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr><td>nameof</td><td>Converts the 'key' name component of an expression to a string</td><td><pre>nameof(A.B<C>(D)) == &quot;B&quot;</td></tr>
<tr><td>concatId</td><td>Concats 2 Ids to a new Id</td><td><pre>concatId(a, b) == ab</td></tr>
<tr><td>$variableName</td><td>Expands a variable (scoped property)</td><td><pre>if $target == &quot;dotnet&quot; {}</pre></td></tr>
<tr><td>generateId()</td><td>Generates a new Id</td><td><pre>generateId() == a0</td></tr>
<tr><td>target</td><td>Compile code in body only if the given compilation target is same</td><td><pre>target(dotnet) { print(&quot;only run if target is .net&quot;); }</td></tr>
<tr><td>quote</td><td>Generates the tree of the given code</td><td><pre>quote { print(&quot;Hi&quot;); }</td></tr>
<tr><td>unroll</td><td>This macro &quot;pastes&quot; the same body for every entry in the given list</td><td><pre>#unroll(it, 1..3) { print(&quot;It also has: &quot; + it); }</pre> converts to <pre>print(&quot;It also has: 1&quot;); print(&quot;It also has: 2&quot;); print(&quot;It also has: 3&quot;);</td></tr>
<tr><td>todo</td><td>Add a warning to memorize todos. Can be used to generate a todo list</td><td><pre>@todo(&quot;Implement some new functionality&quot;) <br /> func nothing() {}</pre></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="the-syntax-tree"><a class="header" href="#the-syntax-tree">The Syntax Tree</a></h1>
<p>The syntax tree consists of flexible nodes called LNodes. The structure is like <a href="https://en.wikipedia.org/wiki/S-expression">s-expressions</a>. A node has a target, arguments and attributes.</p>
<p>Calling Conventions of Targets:</p>
<p>' is an operator, for example: <code>1 + 2</code>
<code>'+(1, 2)
   </code></p>
<p># is a keyword, for example: <code>while true {}</code>
<code>#while(#Boolean(true), '{})
   </code></p>
<p>Literals are automaticly typed by the parser. A type is a call and a literal node as argument. So the number <code>42</code> will be treated as <code>#Int32(42)</code>. Modifiers like <code>public</code> are attributes on a node.
The <code>quote</code> macro expand code to its actual tree. So you can use it to figure out a tree of a certain language construct.</p>
<p>And now, a <em>quiz</em>:</p>
<div class="quiz-placeholder" data-quiz-name="tree"  data-quiz-questions="{&quot;questions&quot;:[{&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:1},&quot;prompt&quot;:{&quot;choices&quot;:[&quot;A `char` can't be casted to an integer, a `string` can&quot;,&quot;A `char` is only 1 character and a string is a list of characters&quot;],&quot;prompt&quot;:&quot;What is the difference between `char` and `string`?&quot;}}]}"  data-quiz-commit-hash="5854d34742864503f3a7b63a4fc4805ba675e015
" ></div>
<h2 id="exercices-6"><a class="header" href="#exercices-6">Exercices</a></h2>
<ol>
<li>
<p>If you have an expression <code>42</code>. What tree will be used?
[ ] #uint(42)
[ ] #literal(42)
[ ] #Int32(42)</p>
</li>
<li>
<p>Translate this code snippet to the actual tree:</p>
</li>
</ol>
<pre><code class="language-back">func main() {
    let userInput = System.Console::ReadLine();

    if userInput == &quot;:q&quot; {
        print(&quot;The application will now close&quot;);
    }
}
</code></pre>
<ol start="3">
<li>Translate this tree to valid backlang code:</li>
</ol>
<p><code>@[mutable] #var(#type(#(@'', #of())), errorCode = #uint64(0));</code><script type="text/javascript" src="mdbook-quiz/embed.js"></script></p>
<link rel="stylesheet" type="text/css" href="mdbook-quiz/embed.css"><div style="break-before: page; page-break-before: always;"></div><h2 id="writing-custom-macros"><a class="header" href="#writing-custom-macros">Writing Custom Macros</a></h2>
<p>To write a custom macro you have to provide an annotation to it to tell on which type of node you want to match.</p>
<pre><code class="language-back">@MacroInfo(&quot;A macro for writing Tests&quot;, &quot;test&quot;, MacroMode.Call)
macro MyTestMacro(node : LNode, context : IMacroContext) {
    let testName = node.Args[0];
    let body = node.Args[1];

    return quote {
        public func $testName() {
            $body;
        }
    }
}
</code></pre>
<p>The macro called</p>
<pre><code class="language-back">test(something_should_pass) {
    assert(true);
}
</code></pre>
<p>expands to</p>
<pre><code class="language-back">public func something_should_pass() {
    assert(true);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="writing-a-domain-specific-language-with-macros"><a class="header" href="#writing-a-domain-specific-language-with-macros">Writing a Domain Specific Language with macros</a></h1>
<p>A domain specific language is a language besides the general purpose for specific domains eg. SQL, HTML, ...</p>
<p>Backlang supports a special syntax of macros to use it like language constructs.</p>
<h2 id="a-basic-example"><a class="header" href="#a-basic-example">A Basic Example</a></h2>
<p>For now we will write a simple example to represent an object structure and convert it automaticly to a XML file.</p>
<p>The DSL looks like this:</p>
<pre><code class="language-back">func main() {
    let xmlDoc = xml {
        settings {
            general {
                autoUpdate = true;
                titlePrefix = &quot;Sample - &quot;;
            }
        }
    };
}
</code></pre>
<p>The resulting object:</p>
<pre><code class="language-back">public static func main() {
    let xmlDoc = &quot;&lt;settings&gt;&lt;general&gt;&lt;autoUpdate&gt;true&lt;/autoUpdate&gt;&lt;titlePrefix&gt;Sample - &lt;/titlePrefix&gt;&lt;/general&gt;&lt;/settings&gt;&quot;;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="accessibility"><a class="header" href="#accessibility">Accessibility</a></h1>
<p>Backlang can protect code elements from external access. The keywords controlling accessibility are called modifiers. Here is a list of all modifiers:</p>
<div class="table-wrapper"><table><thead><tr><th>Modifier</th><th>Accessibility Rule</th></tr></thead><tbody>
<tr><td>private</td><td>only visible in owner</td></tr>
<tr><td>public</td><td>visible to all</td></tr>
<tr><td>protected</td><td>only visible in inheriting classes</td></tr>
<tr><td>internal</td><td>only visible in the current assembly</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody>
<tr><td>extern</td><td>The function is implemented somewhere</td></tr>
</tbody></table>
</div>
<p>If no modifier is specified the default is private.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="intrinsics"><a class="header" href="#intrinsics">Intrinsics</a></h1>
<p>An intrinsic is a function that compiles directly to the targeted platform as an instruction instead of calling it.
In Backlang you can specify which block of instrinsic instructions are compiled based on the target. Every intrinsic instruction is a simple function call without a return value.</p>
<pre><code class="language-back">inline(dotnet) {
    ld_str(&quot;Hello {0}&quot;);
    ldc_i4(42);
    call(System.Console::WriteLine(string, obj));
}
</code></pre>
<p>A list of available <a href="/intrinsics/dotnet.html">Dotnet</a> intrinsics</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dotnet-intrinsics"><a class="header" href="#dotnet-intrinsics">Dotnet Intrinsics</a></h1>
<div class="table-wrapper"><table><thead><tr><th>Intrinsic</th><th>Explanation</th><th>Example</th></tr></thead><tbody>
<tr><td>ld_null</td><td>Load Null</td><td><pre><code class="language-back">ld_null();</code></pre></td></tr>
<tr><td>ld_str</td><td>Load String</td><td><pre><code class="language-back">ld_str(&quot;Hello World&quot;);</code></pre></td></tr>
<tr><td>ldc_i4</td><td>Load Integer Constant</td><td><pre><code class="language-back">ldc_i4(42);</code></pre></td></tr>
<tr><td>ldc_i8</td><td>Load Long Integer Constant</td><td><pre><code class="language-back">ldc_i8(420000);</code></pre></td></tr>
<tr><td>ldc_r4</td><td>Load Float Constant</td><td><pre><code class="language-back">ldc_r4(3.14);</code></pre></td></tr>
<tr><td>ldc_r8</td><td>Load Long Float Constant</td><td><pre><code class="language-back">ldc_r8(3.1400000011);</code></pre></td></tr>
<tr><td>ldarg</td><td>Load Argument</td><td><pre><code class="language-back">ldarg(0);</code></pre></td></tr>
<tr><td>ldloc</td><td>Load Local</td><td><pre><code class="language-back">ldloc(myVariable);</code></pre></td></tr>
<tr><td>ldfld</td><td>Load Field</td><td><pre><code class="language-back">ldfld(myField);</code></pre></td></tr>
<tr><td>stfld</td><td>Store Field</td><td><pre><code class="language-back">stfld(myField);</code></pre></td></tr>
<tr><td>add</td><td>Add 2 Values Together</td><td><pre><code class="language-back">add();</code></pre></td></tr>
<tr><td>neg</td><td>Negate Value</td><td><pre><code class="language-back">negate();</code></pre></td></tr>
<tr><td>nop</td><td>Do Nothing</td><td><pre><code class="language-back">nop();</code></pre></td></tr>
<tr><td>ret</td><td>Return</td><td><pre><code class="language-back">return();</code></pre></td></tr>
<tr><td>throw</td><td>Throw An Exception</td><td><pre><code class="language-back">throw(Exception::new(&quot;Error&quot;));</code></pre></td></tr>
</tbody></table>
</div>
<p>Find More On <a href="https://en.wikipedia.org/wiki/List_of_CIL_instructions">Wikipedia</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="plugins"><a class="header" href="#plugins">Plugins</a></h1>
<p>A plugin can extend the compiler, for example by adding a new backend to compile to. The <a href="/plugins/bs2k.html">Bs2K</a> is a sample backend plugin.</p>
<p>To install plugins through the manager: <code>backlang plugins -i Backlang.Backends.Bs2k</code></p>
<p>The manager can search for all available plugins: <code>backlang plugins -a</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custom-plugins"><a class="header" href="#custom-plugins">Custom Plugins</a></h1>
<p>To create a plugin create a new dotnet assembly that targets min. Dotnet 7 and install Backlang.Contracts from nuget. You can make your plugin visible to the backlang manager by packing your assembly as nuget package with the tags <code>backlang</code> and <code>plugin</code> and publish it on nuget.</p>
<h2 id="a-custom-backend"><a class="header" href="#a-custom-backend">A custom Backend</a></h2>
<p>To make a backend visible to the compiler you have to export it with the <code>Export</code> annotation on your backend class that implements the <code>ICompilationTarget</code> interface. </p>
<p>Here is a simple example:</p>
<pre><code class="language-back">import Backlang.Contracts;

@Export(typeof(ICompilationTarget))
public class CustomBackend : ICompilationTarget {

}
</code></pre>
<p>The <code>ICompilationTarget</code> interface provides some methods to initialize the typesystem for your backend and your intrinsics, if you support it. To generate code you have to implement the <code>ITargetAssembly</code> interface and return it by the <code>Compile</code> method. This assembly is the actual code generator. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="intrinsics-for-the-custom-backend"><a class="header" href="#intrinsics-for-the-custom-backend">Intrinsics for the custom backend</a></h1>
<p>To provide custom intrinsic methods you have to create a static class with static methods and provide the type in your <code>ICompilationTarget</code> implementing class. The compiler automaticly checks if the method is present and convert the intrinsic to a real method on your intrinsic class. Simple values are automaticly passed to your intrinsic methods. </p>
<h2 id="identifiers"><a class="header" href="#identifiers">Identifiers</a></h2>
<p>You can use identifiers to represent for example registers and give addresses names. A custom identifier is present by an enum. You have to provide it as static field on your intrinsic class. Now you can use your enum in intrinsic methods.
To give numbers only a name like special addresses you can add a <code>IntrinsicAlias</code> annotation to your enum. The IntrinsicAlias enums will be automaticly converted to its value.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bs2k"><a class="header" href="#bs2k">Bs2K</a></h1>
<p>The <a href="https://github.com/Backseating-Committee-2k/BackseatSafeSystem2k">BackseatSafesystem2k</a> is a twitch project by Coder2k. 
It is an emulator for an invented platform. The main purpose is to learn how to make a runtime+assembler+programming language.
The Backlang Bs2K Backend compiles to Bs2K assembler. It must be assembled by your own to run your applications on the runtime.</p>
<h2 id="intrinsics-1"><a class="header" href="#intrinsics-1">Intrinsics</a></h2>
<p>The Bs2K backend has also support for intrinsics, so you can use special runtime features that are not available in the Bs2K Standardlibrary Wrapper.</p>
<p>Here is a simple Example:</p>
<pre><code class="language-back">inline(bs2k) {
    copy(R1, 1);
    label(&quot;loop&quot;);
        copy(R2, 64);
        add(R1, R2, R3);
        push(R3)
        call(std::put_char(char));
        jump(&quot;loop&quot;);
}
</code></pre>
<p>Here is a small list of available instructions, but all current instructions are supported.</p>
<div class="table-wrapper"><table><thead><tr><th>Intrinsic</th><th>Explanation</th><th>Example</th></tr></thead><tbody>
<tr><td>copy</td><td>Copy Value</td><td><pre><code class="language-back">copy(r0, 42);</code></pre></td></tr>
<tr><td>jump</td><td>Jump to register or label</td><td><pre><code class="language-back">jump(r0);</code></pre></td></tr>
<tr><td>jump_eq</td><td>Jump to register or label when equals</td><td><pre><code class="language-back">jump(r0, r2);</code></pre></td></tr>
<tr><td>jump_neq</td><td>Jump to register or label when not equals</td><td><pre><code class="language-back">jump(r0, r2);</code></pre></td></tr>
<tr><td>jump_gt</td><td>Jump to register or label when greather than</td><td><pre><code class="language-back">jump(cool_label, r2);</code></pre></td></tr>
<tr><td>jump_ge</td><td>Jump to register or label when greater equals</td><td><pre><code class="language-back">jump(r0, r2);</code></pre></td></tr>
<tr><td>jump_lt</td><td>Jump to register or label when less than</td><td><pre><code class="language-back">jump(r0, r2);</code></pre></td></tr>
<tr><td>jump_le</td><td>Jump to register or label when less equals</td><td><pre><code class="language-back">jump(my_label_3, r2);</code></pre></td></tr>
<tr><td>push</td><td>Push Value To Stack</td><td><pre><code class="language-back">push(r0);</code></pre></td></tr>
<tr><td>pop</td><td>Pop Value From Stack</td><td><pre><code class="language-back">pop(r1);</code></pre></td></tr>
<tr><td>ret</td><td>Return From Function</td><td><pre><code class="language-back">ret();</code></pre></td></tr>
<tr><td>noop</td><td>Do Nothing</td><td><pre><code class="language-back">noop();</code></pre></td></tr>
<tr><td>halt</td><td>Stop Clock</td><td><pre><code class="language-back">halt();</code></pre></td></tr>
<tr><td>add</td><td>Adds values from two registers and stores</td><td><pre><code class="language-back">add(r1, r2, r3);</code></pre></td></tr>
<tr><td>sub</td><td>Subtracts values from two registers and stores</td><td><pre><code class="language-back">sub(r1, r2, r3);</code></pre></td></tr>
<tr><td>mult</td><td>Multiplies values from two registers and stores in two registers</td><td><pre><code class="language-back">mult(r1, r2, r4, r3);</code></pre></td></tr>
<tr><td>divmod</td><td>Divides values from two registers and stores amount and remainder</td><td><pre><code class="language-back">divmod(r1, r2, r3, r4);</code></pre></td></tr>
<tr><td>and</td><td></td><td><pre><code class="language-back">and(r1, r2, r3);</code></pre></td></tr>
<tr><td>or</td><td></td><td><pre><code class="language-back">or(r1, r2, r3);</code></pre></td></tr>
<tr><td>comp</td><td>Compares two values from registers</td><td><pre><code class="language-back">comp(r1, r2, r3);</code></pre></td></tr>
<tr><td>comp_eq</td><td>Compares two values from registers (equals)</td><td><pre><code class="language-back">comp_eq(r1, r2, r3);</code></pre></td></tr>
<tr><td>comp_neq</td><td>Compares two values from registers (not equals)</td><td><pre><code class="language-back">comp_neq(r1, r2, r3);</code></pre></td></tr>
<tr><td>comp_gt</td><td>Compares two values from registers (greater than)</td><td><pre><code class="language-back">comp_gt(r1, r2, r3);</code></pre></td></tr>
<tr><td>comp_ge</td><td>Compares two values from registers (greater equals)</td><td><pre><code class="language-back">comp_ge(r1, r2, r3);</code></pre></td></tr>
<tr><td>comp_lt</td><td>Compares two values from registers (less than)</td><td><pre><code class="language-back">comp_lt(r1, r2, r3);</code></pre></td></tr>
<tr><td>comp_le</td><td>Compares two values from registers (less equals)</td><td><pre><code class="language-back">comp_le(r1, r2, r3);</code></pre></td></tr>
<tr><td>get_key_state</td><td>Get Current Key State</td><td><pre><code class="language-back">get_key_state(r2, r3);</code></pre></td></tr>
<tr><td>poll_time</td><td>Get Current Time</td><td><pre><code class="language-back">poll_time(r4, r5);</code></pre></td></tr>
<tr><td>swap_framebuffers</td><td>Swap Framebuffers</td><td><pre><code class="language-back">swap_framebuffers();</code></pre></td></tr>
</tbody></table>
</div>
<p>Find More On <a href="https://github.com/Backseating-Committee-2k/BackseatSafeSystem2k/blob/main/src/opcodes.rs#L332">Github</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="theme/custom-highlight.js"></script>
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
